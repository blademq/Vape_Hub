<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CloudHub | –ú–∞–≥–∞–∑–∏–Ω –≤–µ–π–ø-–ø—Ä–æ–¥—É–∫—Ü–∏–∏</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

:root {
  --primary: #8a2be2;
  --primary-dark: #6a1cb0;
  --secondary: #ff6b9d;
  --dark: #0c0c14;
  --dark-light: #1a1a24;
  --darker: #07070c;
  --light: #f0f0f5;
  --gray: #a0a0b0;
  --success: #2be28a;
  --danger: #ff4757;
  --warning: #ffa502;
}

body {
  background-color: var(--dark);
  color: var(--light);
  min-height: 100vh;
  padding-bottom: 80px;
}

/* Header */
header {
  background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 100%);
  padding: 16px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.logo {
  display: flex;
  align-items: center;
  gap: 10px;
}

.logo-icon {
  color: var(--primary);
  font-size: 24px;
}

.logo-text {
  font-weight: 700;
  font-size: 22px;
  background: linear-gradient(to right, var(--primary), var(--secondary));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.currency {
  font-size: 12px;
  color: var(--gray);
  margin-left: 5px;
}

.header-actions {
  display: flex;
  gap: 15px;
}

.icon-btn {
  background: var(--dark-light);
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s;
  position: relative;
}

.icon-btn:hover {
  background: var(--primary);
  transform: translateY(-2px);
}

/* –ü–æ–∏—Å–∫ */
.search-container {
  margin: 20px;
}

.search-box {
  background: var(--dark-light);
  border-radius: 50px;
  padding: 14px 20px;
  display: flex;
  align-items: center;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(138, 43, 226, 0.2);
}

.search-box i {
  color: var(--gray);
  margin-right: 10px;
}

.search-box input {
  flex: 1;
  background: none;
  border: none;
  color: var(--light);
  font-size: 16px;
  outline: none;
}

/* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ */
.categories {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
  padding: 0 20px 20px;
  margin-bottom: 20px;
}

.category-card {
  background: var(--dark-light);
  border-radius: 15px;
  padding: 15px;
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
  transition: all 0.3s;
  text-align: center;
}

.category-card:hover {
  background: rgba(138, 43, 226, 0.1);
  transform: translateY(-3px);
}

.category-image {
  width: 60px;
  height: 60px;
  object-fit: contain;
  margin-bottom: 10px;
  border-radius: 10px;
}

.category-name {
  font-size: 14px;
  font-weight: 600;
}

/* –¢–æ–≤–∞—Ä—ã */
.products-grid {
  padding: 0 20px;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 15px;
  margin-bottom: 30px;
}

.product-card {
  background: var(--dark-light);
  border-radius: 15px;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.3s;
  border: 1px solid rgba(255, 255, 255, 0.05);
}

.product-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(138, 43, 226, 0.2);
}

.product-image {
  height: 140px;
  background: #1a1a24;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 15px;
}

.product-image img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}

.product-info {
  padding: 15px;
}

.product-name {
  font-weight: 600;
  margin-bottom: 5px;
  font-size: 16px;
}

.product-category {
  font-size: 12px;
  color: var(--gray);
  margin-bottom: 10px;
}

.product-price {
  font-weight: 700;
  color: var(--primary);
  margin-bottom: 15px;
  font-size: 18px;
}

.btn-select {
  background: linear-gradient(to right, var(--primary), var(--primary-dark));
  color: white;
  border: none;
  padding: 10px;
  border-radius: 10px;
  font-weight: 600;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.3s;
  width: 100%;
}

.btn-select:hover {
  background: linear-gradient(to right, var(--primary-dark), var(--primary));
  box-shadow: 0 5px 15px rgba(138, 43, 226, 0.3);
}

/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –≤–∫—É—Å–∞ */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(10, 10, 15, 0.95);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s;
}

.modal-overlay.active {
  opacity: 1;
  visibility: visible;
}

.modal-container {
  background: var(--dark-light);
  border-radius: 20px;
  width: 100%;
  max-width: 500px;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5);
  transform: translateY(20px);
  transition: all 0.3s;
}

.modal-overlay.active .modal-container {
  transform: translateY(0);
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.modal-title {
  font-size: 22px;
  font-weight: 700;
  background: linear-gradient(to right, var(--primary), var(--secondary));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.modal-close {
  background: var(--dark);
  color: var(--gray);
  border: none;
  width: 40px;
  height: 40px;
  border-radius: 10px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s;
}

.modal-close:hover {
  background: var(--danger);
  color: white;
}

.modal-content {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
}

.flavor-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.flavor-item {
  background: var(--dark);
  border-radius: 12px;
  padding: 15px;
  cursor: pointer;
  transition: all 0.3s;
  border: 2px solid transparent;
  position: relative;
}

.flavor-item:hover {
  background: rgba(138, 43, 226, 0.1);
  border-color: rgba(138, 43, 226, 0.3);
}

.flavor-item.selected {
  background: rgba(138, 43, 226, 0.15);
  border-color: var(--primary);
}

.flavor-name {
  font-weight: 600;
  font-size: 16px;
}

.flavor-check {
  position: absolute;
  top: 15px;
  right: 15px;
  color: var(--primary);
  font-size: 18px;
  opacity: 0;
}

.flavor-item.selected .flavor-check {
  opacity: 1;
}

.modal-footer {
  padding: 20px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  display: flex;
  gap: 10px;
}

.modal-footer .btn-primary {
  flex: 1;
}

.btn-primary {
  background: linear-gradient(to right, var(--primary), var(--primary-dark));
  color: white;
  border: none;
  padding: 14px;
  border-radius: 12px;
  font-weight: 600;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(138, 43, 226, 0.3);
}

.btn-secondary {
  background: transparent;
  color: var(--gray);
  border: 1px solid var(--gray);
  padding: 14px;
  border-radius: 12px;
  font-weight: 600;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.3s;
}

.btn-secondary:hover {
  color: var(--light);
  border-color: var(--light);
}

/* –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
.nav-footer {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--darker);
  display: flex;
  justify-content: space-around;
  padding: 15px 0;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  z-index: 100;
}

.nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
  transition: all 0.3s;
  padding: 5px 15px;
  border-radius: 12px;
  position: relative;
}

.nav-item i {
  font-size: 20px;
  margin-bottom: 4px;
}

.nav-item span {
  font-size: 12px;
}

.nav-item.active {
  color: var(--primary);
  background: rgba(138, 43, 226, 0.1);
}

.cart-badge {
  position: absolute;
  top: -5px;
  right: 5px;
  background: var(--secondary);
  color: white;
  font-size: 10px;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
}

/* –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ—Ä–∑–∏–Ω—ã */
.cart-page {
  display: none;
}

.back-btn {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 20px;
  cursor: pointer;
  color: var(--primary);
  font-weight: 600;
}

.back-btn i {
  font-size: 18px;
}

.cart-items {
  padding: 0 20px;
}

.cart-item {
  background: var(--dark-light);
  border-radius: 15px;
  padding: 15px;
  margin-bottom: 15px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.cart-item-info {
  flex: 1;
}

.cart-item-name {
  font-weight: 600;
  margin-bottom: 5px;
}

.cart-item-flavor {
  font-size: 12px;
  color: var(--gray);
  margin-bottom: 5px;
}

.cart-item-price {
  font-weight: 700;
  color: var(--primary);
}

.btn-remove {
  background: var(--danger);
  color: white;
  border: none;
  width: 36px;
  height: 36px;
  border-radius: 10px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s;
}

.btn-remove:hover {
  background: #ff2e43;
  transform: scale(1.1);
}

.cart-summary {
  background: var(--dark-light);
  border-radius: 20px;
  padding: 20px;
  margin: 20px;
  margin-top: 30px;
}

.cart-total {
  display: flex;
  justify-content: space-between;
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.cart-total-amount {
  color: var(--primary);
}

.telegram-payment {
  background: #2aabee;
  color: white;
  border: none;
  padding: 16px;
  border-radius: 12px;
  font-weight: 600;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  width: 100%;
  margin-top: 10px;
}

.telegram-payment:hover {
  background: #229ed9;
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(42, 171, 238, 0.3);
}

.payment-info {
  margin-top: 20px;
  padding: 15px;
  background: rgba(42, 171, 238, 0.1);
  border-radius: 12px;
  text-align: center;
}

.payment-info p {
  margin-bottom: 10px;
  color: var(--gray);
}

.telegram-username {
  background: var(--dark);
  padding: 10px 15px;
  border-radius: 10px;
  font-family: monospace;
  color: var(--primary);
  font-weight: 600;
  display: inline-block;
  margin: 10px 0;
}

.empty-state {
  text-align: center;
  padding: 60px 20px;
}

.empty-state i {
  font-size: 60px;
  color: var(--gray);
  margin-bottom: 20px;
  opacity: 0.5;
}

.empty-state h3 {
  margin-bottom: 10px;
  color: var(--light);
}

.empty-state p {
  color: var(--gray);
  margin-bottom: 20px;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (min-width: 768px) {
  .products-grid {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .modal-container {
    max-width: 600px;
  }
  
  .flavor-list {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
  }
}
</style>
</head>
<body>

<header>
  <div class="logo" onclick="goToHome()">
    <div class="logo-icon">
      <i class="fas fa-cloud"></i>
    </div>
    <div class="logo-text">CloudHub<span class="currency"></span></div>
  </div>
  
  <div class="header-actions">
    <div class="icon-btn" onclick="openCartPage()">
      <i class="fas fa-shopping-cart"></i>
      <div class="cart-badge" id="header-cart-badge">0</div>
    </div>
  </div>
</header>

<main>
  <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–∞–≥–∞–∑–∏–Ω–∞ -->
  <div id="shop-page" style="display: block;">
    <div class="search-container">
      <div class="search-box">
        <i class="fas fa-search"></i>
        <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –∂–∏–¥–∫–æ—Å—Ç–µ–π..." oninput="searchProducts()">
      </div>
    </div>
    
    <div class="categories">
      <div class="category-card" onclick="filterProducts('–ñ–∏–¥–∫–æ—Å—Ç–∏')">
        <img src="https://i.imgur.com/QGv2Uvv.png" alt="–ñ–∏–¥–∫–æ—Å—Ç–∏" class="category-image">
        <div class="category-name">–ñ–∏–¥–∫–æ—Å—Ç–∏</div>
      </div>
      
      <div class="category-card" onclick="filterProducts('–û–¥–Ω–æ—Ä–∞–∑–∫–∏')">
        <img src="https://i.imgur.com/xhr3S0G.png" alt="–û–¥–Ω–æ—Ä–∞–∑–∫–∏" class="category-image">
        <div class="category-name">–û–¥–Ω–æ—Ä–∞–∑–∫–∏</div>
      </div>
      
      <div class="category-card" onclick="filterProducts('–ü–æ–¥—ã')">
        <img src="https://i.imgur.com/PW1Pqyz.png" alt="–ü–æ–¥—ã" class="category-image">
        <div class="category-name">–ü–æ–¥—ã</div>
      </div>
      
      <div class="category-card" onclick="filterProducts('–ö–∞—Ä—Ç—Ä–∏–¥–∂–∏')">
        <img src="https://i.imgur.com/gvDaEyg.png" alt="–ö–∞—Ä—Ç—Ä–∏–¥–∂–∏" class="category-image">
        <div class="category-name">–ö–∞—Ä—Ç—Ä–∏–¥–∂–∏</div>
      </div>
    </div>
    
    <div class="products-grid" id="products-container">
      <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
    </div>
  </div>
  
<script>
// ========== –û–¢–ü–†–ê–í–ö–ê –ó–ê–ö–ê–ó–ê ==========

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
function copyOrderToClipboard() {
  if (cart.length === 0) {
    showNotification('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞');
    return;
  }
  
  const total = cart.reduce((sum, item) => sum + item.price, 0);
  const orderNumber = 'ORD-' + Date.now().toString().slice(-6);
  const timestamp = new Date().toLocaleString('ru-RU');
  
  // –§–æ—Ä–º–∏—Ä—É–µ–º –∫—Ä–∞—Å–∏–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
  let message = `üõí *–ù–û–í–´–ô –ó–ê–ö–ê–ó –ù–ê CLOUDHUB* üõí\n`;
  message += `üì¶ *–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞:* ${orderNumber}\n`;
  message += `‚è∞ *–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è:* ${timestamp}\n`;
  message += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n`;
  message += `*–¢–û–í–ê–†–´ –í –ó–ê–ö–ê–ó–ï:*\n`;
  
  cart.forEach((item, index) => {
    message += `${index + 1}. *${item.name}*\n`;
    if (item.flavor) {
      message += `   üçÉ –í–∞—Ä–∏–∞–Ω—Ç: ${item.flavor}\n`;
    }
    message += `   üí∞ –¶–µ–Ω–∞: ${item.price.toFixed(2)} z≈Ç\n`;
    message += `   üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${item.category}\n`;
    message += `\n`;
  });
  
  message += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n`;
  message += `üí∞ *–ò–¢–û–ì–û –ö –û–ü–õ–ê–¢–ï:* ${total.toFixed(2)} z≈Ç\n\n`;
  message += `üë§ *–ö–æ–Ω—Ç–∞–∫—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–∞:* @managercloudm\n`;
  message += `üì± *–°–≤—è–∑—å —á–µ—Ä–µ–∑:* Telegram`;
  
  try {
    // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π textarea –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
    const textArea = document.createElement('textarea');
    textArea.value = message;
    document.body.appendChild(textArea);
    textArea.select();
    
    // –ü—ã—Ç–∞–µ–º—Å—è —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å
    const successful = document.execCommand('copy');
    
    // –£–¥–∞–ª—è–µ–º textarea
    document.body.removeChild(textArea);
    
    if (successful) {
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Ä–æ–±–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
      showDetailedNotification(
        '‚úÖ –ó–∞–∫–∞–∑ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!',
        `–¢–µ–ø–µ—Ä—å –æ—Ç–∫—Ä–æ–π—Ç–µ Telegram, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –∫ –º–µ–Ω–µ–¥–∂–µ—Ä—É @managercloudm –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–∫–∞–∑ –≤ —á–∞—Ç.\n\n–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞: ${orderNumber}\n–°—É–º–º–∞: ${total.toFixed(2)} z≈Ç`,
        'success'
      );
      
      // –û—Ç–∫—Ä—ã–≤–∞–µ–º Telegram
      setTimeout(() => {
        window.open('https://t.me/managercloudm', '_blank');
      }, 1500);
      
      // –û—á–∏—â–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
      setTimeout(() => {
        cart = [];
        saveCart();
        updateCartBadge();
        renderCart();
      }, 1000);
      
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Å—Ç–æ—Ä–∏—é –∑–∞–∫–∞–∑–∞
      saveOrderHistory(orderNumber, total, message);
    } else {
      showNotification('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫–∞–∑. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
    }
  } catch (err) {
    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏:', err);
    showNotification('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±.');
    
    // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
    fallbackCopyOrder(message);
  }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
function showDetailedNotification(title, message, type = 'info') {
  // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  const notification = document.createElement('div');
  notification.style.cssText = `
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: ${type === 'success' ? 'var(--success)' : 'var(--primary)'};
    color: white;
    padding: 25px;
    border-radius: 20px;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
    z-index: 10000;
    font-weight: 600;
    animation: fadeIn 0.3s;
    width: 90%;
    max-width: 400px;
    text-align: center;
    border: 3px solid rgba(255, 255, 255, 0.2);
  `;
  
  notification.innerHTML = `
    <div style="margin-bottom: 20px;">
      <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-info-circle'}" style="font-size: 50px; color: rgba(255, 255, 255, 0.9); margin-bottom: 15px;"></i>
      <h3 style="margin-bottom: 15px; font-size: 22px;">${title}</h3>
      <p style="font-size: 15px; line-height: 1.5; opacity: 0.9; margin-bottom: 20px;">${message}</p>
    </div>
    <div style="display: flex; gap: 10px; justify-content: center;">
      <button onclick="this.parentElement.parentElement.remove(); openTelegramDirectly()" style="background: white; color: var(--primary); border: none; padding: 12px 25px; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.3s; flex: 1;">
        <i class="fab fa-telegram" style="margin-right: 8px;"></i>–û—Ç–∫—Ä—ã—Ç—å Telegram
      </button>
      <button onclick="this.parentElement.parentElement.remove()" style="background: rgba(255, 255, 255, 0.2); color: white; border: 1px solid rgba(255, 255, 255, 0.4); padding: 12px 25px; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.3s;">
        –ó–∞–∫—Ä—ã—Ç—å
      </button>
    </div>
  `;
  
  document.body.appendChild(notification);
  
  // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—è–≤–ª–µ–Ω–∏—è
  notification.style.opacity = '0';
  notification.style.transition = 'opacity 0.3s';
  setTimeout(() => notification.style.opacity = '1', 10);
  
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
  setTimeout(() => {
    if (notification.parentElement) {
      notification.style.opacity = '0';
      setTimeout(() => {
        if (notification.parentElement) {
          notification.parentElement.removeChild(notification);
        }
      }, 300);
    }
  }, 10000);
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è Telegram –Ω–∞–ø—Ä—è–º—É—é
function openTelegramDirectly() {
  window.open('https://t.me/managercloudm', '_blank');
}

// –†–µ–∑–µ—Ä–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
function fallbackCopyOrder(message) {
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
  const modalHTML = `
    <div id="manual-copy-modal" class="modal-overlay active">
      <div class="modal-container" style="max-width: 500px;">
        <div class="modal-header">
          <div class="modal-title">–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–∞–∫–∞–∑ –≤—Ä—É—á–Ω—É—é</div>
          <button class="modal-close" onclick="closeManualCopyModal()">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <div class="modal-content">
          <div style="text-align: center; margin-bottom: 20px;">
            <i class="fas fa-copy" style="font-size: 40px; color: var(--primary); margin-bottom: 15px;"></i>
            <h3 style="margin-bottom: 10px;">–ó–∞–∫–∞–∑ –≥–æ—Ç–æ–≤ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ</h3>
            <p style="color: var(--gray); margin-bottom: 20px;">–í—ã–¥–µ–ª–∏—Ç–µ —Ç–µ–∫—Å—Ç –Ω–∏–∂–µ –∏ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C (Cmd+C –Ω–∞ Mac)</p>
          </div>
          
          <div style="background: var(--dark); border-radius: 10px; padding: 15px; margin-bottom: 20px; max-height: 300px; overflow-y: auto;">
            <pre style="white-space: pre-wrap; word-wrap: break-word; font-family: monospace; font-size: 14px; color: var(--light); margin: 0;">${message}</pre>
          </div>
          
          <div style="background: rgba(42, 171, 238, 0.1); border-radius: 10px; padding: 15px; margin-bottom: 20px;">
            <p style="margin-bottom: 10px; color: var(--gray);"><i class="fas fa-info-circle" style="margin-right: 8px;"></i>–ü–æ—Å–ª–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:</p>
            <ol style="padding-left: 20px; color: var(--gray);">
              <li>–û—Ç–∫—Ä–æ–π—Ç–µ Telegram</li>
              <li>–ù–∞–π–¥–∏—Ç–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ @managercloudm</li>
              <li>–í—Å—Ç–∞–≤—å—Ç–µ –∑–∞–∫–∞–∑ –≤ —á–∞—Ç (Ctrl+V –∏–ª–∏ Cmd+V)</li>
              <li>–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</li>
            </ol>
          </div>
        </div>
        
        <div class="modal-footer">
          <button class="btn-primary" onclick="openTelegramDirectly()">
            <i class="fab fa-telegram"></i>
            –û—Ç–∫—Ä—ã—Ç—å Telegram
          </button>
          <button class="btn-secondary" onclick="closeManualCopyModal()">
            –ó–∞–∫—Ä—ã—Ç—å
          </button>
        </div>
      </div>
    </div>
  `;
  
  // –î–æ–±–∞–≤–ª—è–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
  const modalContainer = document.createElement('div');
  modalContainer.innerHTML = modalHTML;
  document.body.appendChild(modalContainer);
  
  // –û—á–∏—â–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
  cart = [];
  saveCart();
  updateCartBadge();
  renderCart();
}

// –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä—É—á–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
function closeManualCopyModal() {
  const modal = document.getElementById('manual-copy-modal');
  if (modal) {
    modal.classList.remove('active');
    setTimeout(() => {
      if (modal.parentElement) {
        modal.parentElement.removeChild(modal);
      }
    }, 300);
  }
}

// –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∑–∞–∫–∞–∑–∞
function saveOrderHistory(orderNumber, total, message) {
  // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –∏—Å—Ç–æ—Ä–∏—é
  let orderHistory = JSON.parse(localStorage.getItem('vapeOrderHistory') || '[]');
  
  // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑
  const order = {
    number: orderNumber,
    date: new Date().toISOString(),
    total: total,
    itemsCount: cart.length,
    items: [...cart], // –ö–æ–ø–∏—Ä—É–µ–º —Ç–µ–∫—É—â—É—é –∫–æ—Ä–∑–∏–Ω—É
    message: message
  };
  
  orderHistory.unshift(order); // –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—á–∞–ª–æ
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 –∑–∞–∫–∞–∑–æ–≤
  if (orderHistory.length > 50) {
    orderHistory = orderHistory.slice(0, 50);
  }
  
  localStorage.setItem('vapeOrderHistory', JSON.stringify(orderHistory));
}

// –û–±–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é processTelegramPayment –≤ –∫–æ—Ä–∑–∏–Ω–µ
// –ó–∞–º–µ–Ω—è–µ–º —Å—Ç–∞—Ä—É—é —Ñ—É–Ω–∫—Ü–∏—é –Ω–∞ –Ω–æ–≤—É—é
function processTelegramPayment() {
  copyOrderToClipboard();
}

// –¢–∞–∫–∂–µ –æ–±–Ω–æ–≤–ª—è–µ–º HTML –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≤ –∫–æ—Ä–∑–∏–Ω–µ
// –ù–∞—Ö–æ–¥–∏–º –≤ –∫–æ–¥–µ –∫–æ—Ä–∑–∏–Ω—ã –∏ –∑–∞–º–µ–Ω—è–µ–º:
// –°—Ç–∞—Ä—ã–π –∫–æ–¥:
// <button class="telegram-payment" onclick="processTelegramPayment()">
//   <i class="fab fa-telegram"></i>
//   –û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Telegram
// </button>

// –ù–æ–≤—ã–π –∫–æ–¥:
// <button class="telegram-payment" onclick="copyOrderToClipboard()">
//   <i class="fas fa-copy"></i>
//   –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫–∞–∑ –∏ –ø–µ—Ä–µ–π—Ç–∏ –≤ Telegram
// </button>
</script>

  <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ—Ä–∑–∏–Ω—ã -->
  <div id="cart-page" class="cart-page">
    <div class="back-btn" onclick="goToHome()">
      <i class="fas fa-arrow-left"></i>
      <span>–ù–∞–∑–∞–¥ –≤ –∫–∞—Ç–∞–ª–æ–≥</span>
    </div>
    
    <div class="cart-items" id="cart-items-container">
      <!-- –¢–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ -->
    </div>
    
    <div id="cart-summary-container">
      <!-- –°—É–º–º–∞ –∑–∞–∫–∞–∑–∞ -->
    </div>
  </div>
</main>

<!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
<div class="nav-footer">
  <div class="nav-item active" onclick="goToHome()">
    <i class="fas fa-store"></i>
    <span>–ö–∞—Ç–∞–ª–æ–≥</span>
  </div>
  
  <div class="nav-item" onclick="openCartPage()">
    <i class="fas fa-shopping-cart"></i>
    <span>–ö–æ—Ä–∑–∏–Ω–∞</span>
    <div class="cart-badge" id="cart-badge">0</div>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –≤–∫—É—Å–∞ -->
<div id="flavor-modal" class="modal-overlay">
  <div class="modal-container">
    <div class="modal-header">
      <div class="modal-title" id="modal-title">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∫—É—Å</div>
      <button class="modal-close" onclick="closeFlavorModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <div class="modal-content">
      <div class="flavor-list" id="flavor-list">
        <!-- –°–ø–∏—Å–æ–∫ –≤–∫—É—Å–æ–≤ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω —á–µ—Ä–µ–∑ JS -->
      </div>
    </div>
    
    <div class="modal-footer">
      <button class="btn-primary" onclick="addToCartWithFlavor()">
        <i class="fas fa-cart-plus"></i>
        –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
      </button>
      <button class="btn-secondary" onclick="closeFlavorModal()">
        –û—Ç–º–µ–Ω–∞
      </button>
    </div>
  </div>
</div>

<script>
// ========== –î–ê–ù–ù–´–ï –¢–û–í–ê–†–û–í ==========

// –í—Å–µ —Ç–æ–≤–∞—Ä—ã —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏
const allProducts = [
  // ========== –ñ–ò–î–ö–û–°–¢–ò ==========
  // Elfliq
  {
    id: 1,
    name: 'Elfliq 30ml 5%',
    category: '–ñ–∏–¥–∫–æ—Å—Ç–∏',
    price: 45,
    image: 'https://i.imgur.com/vEq09Ta.png',
    description: 'Elfliq ‚Äî —Ñ—ñ—Ä–º–æ–≤—ñ —Ä—ñ–¥–∏–Ω–∏ Elf Bar –∑ —è—Å–∫—Ä–∞–≤–∏–º–∏ —Ç–∞ –≤–ø—ñ–∑–Ω–∞–≤–∞–Ω–∏–º–∏ —Å–º–∞–∫–∞–º–∏',
    flavors: [
      'Apple Pear',
      'Blackberry Lemon',
      'Blackcurrant aniseed',
      'Blueberry',
      'Blueberry Raspberry Pomegranate',
      'Blueberry Rose Mint',
      'Blueberry Sour Raspberry',
      'Blue Razz Ice',
      'Blue Razz Lemonade',
      'Cherry',
      'Cherry Cola',
      'Cherry Lemon Peach',
      'Cola',
      'Cool Mint',
      'Double Apple'
    ]
  },
  
  // Chaser Lux 30ml 5%
  {
    id: 2,
    name: 'Chaser Lux 30ml 5%',
    category: '–ñ–∏–¥–∫–æ—Å—Ç–∏',
    price: 50,
    image: 'https://i.imgur.com/IeTuHXS.png',
    description: '–ü—Ä–µ–º–∏–∞–ª—å–Ω–∞—è –ª–∏–Ω–µ–π–∫–∞ —Å–æ–ª–µ–π –¥–ª—è POD-—Å–∏—Å—Ç–µ–º',
    flavors: [
      'Tropic Punch Orange',
      'Coconut Melon',
      'Vitamine',
      'Kiwi Passionfruit Guava',
      'Blueberry Raspberry',
      'Sangria',
      'Turbo mint'
    ]
  },
  
  // Chaser Lux 30ml 6%
  {
    id: 3,
    name: 'Chaser Lux 30ml 6%',
    category: '–ñ–∏–¥–∫–æ—Å—Ç–∏',
    price: 50,
    image: 'https://i.imgur.com/Z0dIMUY.png',
    description: '–ü—Ä–µ–º–∏–∞–ª—å–Ω–∞—è –ª–∏–Ω–µ–π–∫–∞ —Å–æ–ª–µ–π –¥–ª—è POD-—Å–∏—Å—Ç–µ–º',
    flavors: [
      'Sour Apple',
      'Blackberry Lemonade',
      'Sour Watermelon Candy',
      'Peach Yogurt',
      'Blueberry Raspberry',
      'Grape Mint',
      'Watermelon Raspberry',
      'Peach Tea',
      'Kiwi Passion Fruit Guava',
      'Cider Berry',
      'Coconut Melon'
    ]
  },
  
  // Chaser for pods 30ml 5%
  {
    id: 4,
    name: 'Chaser for pods 30ml 5%',
    category: '–ñ–∏–¥–∫–æ—Å—Ç–∏',
    price: 50,
    image: 'https://i.imgur.com/n8NuNv9.png',
    description: '–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è POD-—Å–∏—Å—Ç–µ–º',
    flavors: [
      '–Ø–≥–æ–¥–∏',
      '–ë–ª–∞–∫–∏—Ç–Ω–∞ –º–∞–ª–∏–Ω–∞',
      '–ú\'—è—Ç–∞',
      '–ü–µ—Ä—Å–∏–∫',
      '–ü–æ–ª—É–Ω–∏—Ü—è',
      '–ö–∞–≤—É–Ω',
      '–î–∏–Ω—è',
      '–ì—Ä–µ–π–ø—Ñ—Ä—É—Ç',
      '–ñ–æ–≤—Ç–∞ –º–∞–ª–∏–Ω–∞'
    ]
  },
  
  // CHASER LIMITINI EDITINI 30ML 5%
  {
    id: 5,
    name: 'CHASER LIMITINI EDITINI 30ML 5%',
    category: '–ñ–∏–¥–∫–æ—Å—Ç–∏',
    price: 50,
    image: 'https://i.imgur.com/4LDRirY.png',
    description: '–õ–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Ä–∏—è —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –≤–∫—É—Å–∞–º–∏',
    flavors: [
      'ALOE MINT',
      'JASMINE PEACH',
      'PINEAPPLE PASSION LIME',
      'BALERRINA CAPPUCCINO',
      'GLORBO FRUTTODRILLO',
      'TUNG TUNG TUNG SAHUR'
    ]
  },
  
  // ========== –û–î–ù–û–†–ê–ó–ö–ò ==========
  {
    id: 6,
    name: 'ELFBAR RAYA D3 - 25.000 PUFFS',
    category: '–û–¥–Ω–æ—Ä–∞–∑–∫–∏',
    price: 80,
    image: 'https://i.imgur.com/xhr3S0G.png',
    description: '–û–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è —Å–∏–≥–∞—Ä–µ—Ç–∞ –Ω–∞ 25,000 –∑–∞—Ç—è–∂–µ–∫',
    flavors: [
      'Blueberry Ice',
      'Strawberry Grape',
      'Blackberry Cranberry',
      'Watermelon Ice',
      'Strawberry Watermelon',
      'Peach Ice',
      'Strawberry Ice',
      'Blue Razz Ice',
      'Blueberry Raspberry',
      'Grape Mint',
      'Watermelon Bubble Gum',
      'Apple Peach',
      'Strawberry Banana',
      'Strawberry Peach',
      'Lemon Watermelon',
      'VMT'
    ]
  },
  
  // ========== –ü–û–î–´ ==========
  {
    id: 7,
    name: 'VAPRESSO XROS 5 MINI',
    category: '–ü–æ–¥—ã',
    price: 120,
    image: 'https://i.imgur.com/PW1Pqyz.png',
    description: '–ö–æ–º–ø–∞–∫—Ç–Ω–∞—è POD-—Å–∏—Å—Ç–µ–º–∞',
    flavors: [
      'CARBON BLACK',
      'SKY BLUE',
      'PURPLE',
      'PASTEL CRYSTAL',
      'TITANIUM SILVER',
      'FLOWING GREEN'
    ]
  },
  
  // ========== –ö–ê–†–¢–†–ò–î–ñ–ò ==========
  {
    id: 8,
    name: '–ö–∞—Ç—Ä–∏–¥–∂ XROS 5 MINI',
    category: '–ö–∞—Ä—Ç—Ä–∏–¥–∂–∏',
    price: 25,
    image: 'https://i.imgur.com/gvDaEyg.png',
    description: '–°–º–µ–Ω–Ω—ã–µ –∫–∞—Ä—Ç—Ä–∏–¥–∂–∏',
    flavors: [
      '3ml 0.4Œ©',
      '2ml 0.6Œ©'
    ]
  }
];

// –ö–æ—Ä–∑–∏–Ω–∞
let cart = [];
let currentProduct = null;
let selectedFlavor = null;

// ========== –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò ==========

// –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', function() {
  // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É –∏–∑ localStorage
  const savedCart = localStorage.getItem('vapeCart');
  if (savedCart) {
    cart = JSON.parse(savedCart);
    updateCartBadge();
  }
  
  // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–æ–≤–∞—Ä—ã
  renderProducts(allProducts);
});

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
function renderProducts(products) {
  const container = document.getElementById('products-container');
  container.innerHTML = '';
  
  if (products.length === 0) {
    container.innerHTML = `
      <div class="empty-state" style="grid-column: 1 / -1;">
        <i class="fas fa-box-open"></i>
        <h3>–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –ø–æ–∏—Å–∫–∞</p>
      </div>
    `;
    return;
  }
  
  products.forEach(product => {
    const productCard = document.createElement('div');
    productCard.className = 'product-card';
    
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–ª–∏—á–∏—è –≤–∫—É—Å–æ–≤
    const buttonText = product.flavors && product.flavors.length > 0 ? '–í—ã–±—Ä–∞—Ç—å –≤–∫—É—Å' : '–í –∫–æ—Ä–∑–∏–Ω—É';
    const buttonAction = product.flavors && product.flavors.length > 0 ? 
      `openFlavorModal(${product.id})` : 
      `addToCartSimple(${product.id})`;
    
    productCard.innerHTML = `
      <div class="product-image">
        <img src="${product.image}" alt="${product.name}">
      </div>
      <div class="product-info">
        <div class="product-name">${product.name}</div>
        <div class="product-category">${product.category}</div>
        <div class="product-price">${product.price.toFixed(2)} z≈Ç</div>
        <button class="btn-select" onclick="${buttonAction}">${buttonText}</button>
      </div>
    `;
    
    container.appendChild(productCard);
  });
}

// –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤
function searchProducts() {
  const searchInput = document.getElementById('searchInput');
  const query = searchInput.value.toLowerCase();
  
  if (!query) {
    renderProducts(allProducts);
    return;
  }
  
  const filtered = allProducts.filter(product => 
    product.name.toLowerCase().includes(query) ||
    product.category.toLowerCase().includes(query) ||
    product.description.toLowerCase().includes(query)
  );
  
  renderProducts(filtered);
}

// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
function filterProducts(category) {
  if (!category) {
    renderProducts(allProducts);
    return;
  }
  
  const filtered = allProducts.filter(product => product.category === category);
  renderProducts(filtered);
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–π–¥–∂–∞ –∫–æ—Ä–∑–∏–Ω—ã
function updateCartBadge() {
  const count = cart.length;
  document.getElementById('cart-badge').textContent = count;
  document.getElementById('header-cart-badge').textContent = count;
}

// ========== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –í–ö–£–°–û–í ==========

// –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –≤–∫—É—Å–∞
function openFlavorModal(productId) {
  currentProduct = allProducts.find(p => p.id === productId);
  selectedFlavor = null;
  
  if (!currentProduct) return;
  
  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
  document.getElementById('modal-title').textContent = `–í—ã–±–µ—Ä–∏—Ç–µ –≤–∫—É—Å (${currentProduct.name})`;
  
  // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–ø–∏—Å–æ–∫ –≤–∫—É—Å–æ–≤
  const flavorList = document.getElementById('flavor-list');
  flavorList.innerHTML = '';
  
  currentProduct.flavors.forEach(flavor => {
    const flavorItem = document.createElement('div');
    flavorItem.className = 'flavor-item';
    flavorItem.onclick = () => selectFlavor(flavor);
    
    flavorItem.innerHTML = `
      <div class="flavor-name">${flavor}</div>
      <div class="flavor-check">
        <i class="fas fa-check"></i>
      </div>
    `;
    
    flavorList.appendChild(flavorItem);
  });
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
  document.getElementById('flavor-modal').classList.add('active');
}

// –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
function closeFlavorModal() {
  document.getElementById('flavor-modal').classList.remove('active');
  currentProduct = null;
  selectedFlavor = null;
}

// –í—ã–±—Ä–∞—Ç—å –≤–∫—É—Å
function selectFlavor(flavor) {
  selectedFlavor = flavor;
  
  // –°–Ω–∏–º–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö
  document.querySelectorAll('.flavor-item').forEach(item => {
    item.classList.remove('selected');
  });
  
  // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π
  const flavorItems = document.querySelectorAll('.flavor-item');
  flavorItems.forEach(item => {
    if (item.querySelector('.flavor-name').textContent === flavor) {
      item.classList.add('selected');
    }
  });
}

// –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º –≤–∫—É—Å–æ–º
function addToCartWithFlavor() {
  if (!currentProduct) return;
  
  if (!selectedFlavor && currentProduct.flavors.length > 0) {
    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∫—É—Å');
    return;
  }
  
  const cartItem = {
    id: Date.now(), // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
    productId: currentProduct.id,
    name: currentProduct.name,
    flavor: selectedFlavor,
    category: currentProduct.category,
    price: currentProduct.price,
    image: currentProduct.image
  };
  
  cart.push(cartItem);
  saveCart();
  updateCartBadge();
  closeFlavorModal();
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  showNotification(`–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É: ${currentProduct.name}${selectedFlavor ? ` (${selectedFlavor})` : ''}`);
}

// –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É –±–µ–∑ –≤—ã–±–æ—Ä–∞ –≤–∫—É—Å–∞ (–¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ –±–µ–∑ –≤–∫—É—Å–æ–≤)
function addToCartSimple(productId) {
  const product = allProducts.find(p => p.id === productId);
  if (!product) return;
  
  const cartItem = {
    id: Date.now(),
    productId: product.id,
    name: product.name,
    flavor: null,
    category: product.category,
    price: product.price,
    image: product.image
  };
  
  cart.push(cartItem);
  saveCart();
  updateCartBadge();
  
  showNotification(`–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É: ${product.name}`);
}

// –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
function saveCart() {
  localStorage.setItem('vapeCart', JSON.stringify(cart));
}

// ========== –ö–û–†–ó–ò–ù–ê ==========

// –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–æ—Ä–∑–∏–Ω—ã
function openCartPage() {
  document.getElementById('shop-page').style.display = 'none';
  document.getElementById('cart-page').style.display = 'block';
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é
  document.querySelectorAll('.nav-item').forEach(item => {
    item.classList.remove('active');
  });
  document.querySelectorAll('.nav-item')[1].classList.add('active');
  
  renderCart();
}

// –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é
function goToHome() {
  document.getElementById('shop-page').style.display = 'block';
  document.getElementById('cart-page').style.display = 'none';
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é
  document.querySelectorAll('.nav-item').forEach(item => {
    item.classList.remove('active');
  });
  document.querySelectorAll('.nav-item')[0].classList.add('active');
  
  renderProducts(allProducts);
}

// –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
function renderCart() {
  const container = document.getElementById('cart-items-container');
  const summaryContainer = document.getElementById('cart-summary-container');
  
  if (cart.length === 0) {
    container.innerHTML = `
      <div class="empty-state">
        <i class="fas fa-shopping-cart"></i>
        <h3>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</h3>
        <p>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</p>
      </div>
    `;
    summaryContainer.innerHTML = '';
    return;
  }
  
  container.innerHTML = '';
  
  cart.forEach((item, index) => {
    const cartItem = document.createElement('div');
    cartItem.className = 'cart-item';
    
    cartItem.innerHTML = `
      <div style="display: flex; align-items: center; gap: 15px; flex: 1;">
        <div style="width: 50px; height: 50px; background: #1a1a24; border-radius: 10px; display: flex; align-items: center; justify-content: center;">
          <img src="${item.image}" alt="${item.name}" style="width: 30px; height: 30px; object-fit: contain;">
        </div>
        <div class="cart-item-info">
          <div class="cart-item-name">${item.name}</div>
          ${item.flavor ? `<div class="cart-item-flavor">${item.flavor}</div>` : ''}
          <div class="cart-item-price">${item.price.toFixed(2)} z≈Ç</div>
        </div>
      </div>
      <button class="btn-remove" onclick="removeFromCart(${index})">
        <i class="fas fa-trash"></i>
      </button>
    `;
    
    container.appendChild(cartItem);
  });
  
  // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –∏—Ç–æ–≥–æ–≤—É—é —Å—É–º–º—É
  const total = cart.reduce((sum, item) => sum + item.price, 0);
  
  summaryContainer.innerHTML = `
    <div class="cart-summary">
      <div class="cart-total">
        <span>–ò—Ç–æ–≥–æ:</span>
        <span class="cart-total-amount">${total.toFixed(2)} z≈Ç</span>
      </div>
      <button class="telegram-payment" onclick="copyOrderToClipboard()">
  <i class="fas fa-copy"></i>
  –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫–∞–∑ –∏ –ø–µ—Ä–µ–π—Ç–∏ –≤ Telegram
</button>
      <div class="payment-info">
        <p>–î–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –Ω–∞–ø–∏—à–∏—Ç–µ –º–µ–Ω–µ–¥–∂–µ—Ä—É –≤ Telegram:</p>
        <div class="telegram-username">@managercloudm</div>
        <p>–°–æ–æ–±—â–∏—Ç–µ –º–µ–Ω–µ–¥–∂–µ—Ä—É —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã –∏ –æ–±—â—É—é —Å—É–º–º—É</p>
      </div>
    </div>
  `;
}

// –£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
function removeFromCart(index) {
  if (index >= 0 && index < cart.length) {
    const item = cart[index];
    cart.splice(index, 1);
    saveCart();
    updateCartBadge();
    renderCart();
    showNotification(`–¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã: ${item.name}`);
  }
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ Telegram
function processTelegramPayment() {
  if (cart.length === 0) {
    showNotification('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞');
    return;
  }
  
  const total = cart.reduce((sum, item) => sum + item.price, 0);
  const itemsList = cart.map(item => 
    `- ${item.name}${item.flavor ? ` (${item.flavor})` : ''}: ${item.price.toFixed(2)} z≈Ç`
  ).join('\n');
  
  const message = `–ó–∞–∫–∞–∑ –∏–∑ CloudHub\n\n–¢–æ–≤–∞—Ä—ã:\n${itemsList}\n\n–ò—Ç–æ–≥–æ: ${total.toFixed(2)} z≈Ç\n\n–î–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º: @managercloudm`;
  
  // –ö–æ–ø–∏—Ä—É–µ–º –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
  const textArea = document.createElement('textarea');
  textArea.value = message;
  document.body.appendChild(textArea);
  textArea.select();
  document.execCommand('copy');
  document.body.removeChild(textArea);
  
  showNotification('–ó–∞–∫–∞–∑ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–µ–Ω–µ–¥–∂–µ—Ä—É @managercloudm –≤ Telegram');
  
  // –û—Ç–∫—Ä—ã–≤–∞–µ–º Telegram
  window.open('https://t.me/managercloudm', '_blank');
}

// ========== –£–¢–ò–õ–ò–¢–´ ==========

// –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
function showNotification(message) {
  // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  const notification = document.createElement('div');
  notification.style.cssText = `
    position: fixed;
    top: 100px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--primary);
    color: white;
    padding: 15px 25px;
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
    z-index: 1000;
    font-weight: 600;
    animation: fadeIn 0.3s;
    max-width: 90%;
    text-align: center;
  `;
  notification.textContent = message;
  


  document.body.appendChild(notification);
  
  // –ß–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã —É–¥–∞–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  setTimeout(() => {
    notification.style.opacity = '0';
    notification.style.transition = 'opacity 0.5s';
    setTimeout(() => document.body.removeChild(notification), 500);
  }, 3000);
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ñ–æ–Ω
document.getElementById('flavor-modal').addEventListener('click', function(e) {
  if (e.target.id === 'flavor-modal') {
    closeFlavorModal();
  }
});

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ –∫–ª–∞–≤–∏—à–µ Escape
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    closeFlavorModal();
  }
});
</script>

</body>
</html>
